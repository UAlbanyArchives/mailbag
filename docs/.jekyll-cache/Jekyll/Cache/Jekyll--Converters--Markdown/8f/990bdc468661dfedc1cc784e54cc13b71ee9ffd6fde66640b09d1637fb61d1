I"G<h1 id="pdf-derivatives">PDF derivatives</h1>

<p>Unless youâ€™re using a Docker image, mailbagit is unable to make PDF derivatives out-of-the-box. For this option to be available, you need to have either <a href="https://wkhtmltopdf.org/">wkhtmltopdf</a> or <a href="https://www.google.com/chrome/">Google Chome</a> installed and added to your <code class="language-plaintext highlighter-rouge">PATH</code>.</p>

<h2 id="wkhtmltopdf">wkhtmltopdf</h2>

<p>Adding <code class="language-plaintext highlighter-rouge">wkhtmltopdf</code> or <code class="language-plaintext highlighter-rouge">wkhtmltopdf.exe</code> to your <code class="language-plaintext highlighter-rouge">PATH</code> will make the <code class="language-plaintext highlighter-rouge">pdf</code> derivative option available. You can test this with <code class="language-plaintext highlighter-rouge">wkhtmltopdf -V</code> or <code class="language-plaintext highlighter-rouge">wkhtmltopdf.exe -V</code>.</p>

<h2 id="chrome-headless">Chrome Headless</h2>

<p>Adding <code class="language-plaintext highlighter-rouge">chrome</code>, <code class="language-plaintext highlighter-rouge">chrome.exe</code> or <code class="language-plaintext highlighter-rouge">google-chrome</code> to your <code class="language-plaintext highlighter-rouge">PATH</code> will make the <code class="language-plaintext highlighter-rouge">pdf-chrome</code> derivative option available. You can test this with:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chrome https://archives.albany.edu/mailbag
chrome.exe chrome https://archives.albany.edu/mailbag
google-chrome chrome https://archives.albany.edu/mailbag
</code></pre></div></div>

<h2 id="security-concerns">Security concerns</h2>

<p>Automatically converting the HTML within emails to PDFs can cause security vulnerabilities in some contexts. Since it is <a href="https://wkhtmltopdf.org/status.html">no longer actively maintained</a>, wkhtmltopdf does not recommend running it on user-supplied and unsanitized HTML.</p>

<ul>
  <li><a href="https://www.virtuesecurity.com/kb/wkhtmltopdf-file-inclusion-vulnerability-2/">File Inclusion Vulnerability</a></li>
</ul>

<p>Using Google Chrome or running <code class="language-plaintext highlighter-rouge">mailbagit</code> in a <a href="(/mailbag/docker)">Docker container</a> may mitigate some, but not all of these concerns.</p>

<p>Essentially, both PDF and WARC derivatives require rendering the HTML bodies within email messages. This will send HTTP GET requests from your IP address for any <code class="language-plaintext highlighter-rouge">&lt;img src=""&gt;</code>, <code class="language-plaintext highlighter-rouge">&lt;iframe src=""&gt;</code>, or <code class="language-plaintext highlighter-rouge">&lt;link href=""&gt;</code> included within the HTML, just as if you were to render a message in an email client without additional protections.</p>

<p>Since Mailbag is designed for email preservation, in many contexts it may be unlikely for you to encounter malicious emails designed specifically to cause issues with <code class="language-plaintext highlighter-rouge">mailbagit</code>. However, you are likely to come across <a href="https://www.nutshell.com/blog/email-tracking-pixels-101-how-do-tracking-pixels-work">email trackers</a> so you should be aware of them and how they work.</p>
:ET