I"\<h1 id="using-mailbagit">Using Mailbagit</h1>

<p>Mailbag contains multiple tools for packaging mailbags according to the <a href="/mailbag/spec/">Mailbag Specification</a>.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">mailbagit</code> a command line tool for creating mailbags</li>
  <li><code class="language-plaintext highlighter-rouge">mailbagit-gui</code> a basic graphical user interface which performs the same functions as <code class="language-plaintext highlighter-rouge">mailbagit</code></li>
  <li>a planned guided tool for accessible use by non-technical users</li>
</ul>

<p>⚠️ Creating PDF or WARC derivatives may or may not cause some [security concerns].</p>

<h2 id="using-the-mailbagit-command-line-utility">Using the <code class="language-plaintext highlighter-rouge">mailbagit</code> command line utility</h2>

<p>The arguments listed below can be entered in the command line when using <code class="language-plaintext highlighter-rouge">mailbagit</code>or entered in <code class="language-plaintext highlighter-rouge">mailbagit-gui</code> fields</p>

<h3 id="examples">Examples</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mailbagit path/to/inbox.mbox -i mbox -d pdf warc --mailbag-name account_name
</code></pre></div></div>
<blockquote>
  <p>Packages an MBOX file at <code class="language-plaintext highlighter-rouge">path/to/inbox.mbox</code> into a mailbag named “account_name” with PDF and WARC derivatives for each message. <code class="language-plaintext highlighter-rouge">mailbagit</code> will attempt to use any <code class="language-plaintext highlighter-rouge">X-Folder</code> headers to arrange derivatives.</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mailbagit path/to/export -i pst -d eml html pdf -m allfacstafflistserv
</code></pre></div></div>
<blockquote>
  <p>Packages all the PST files found in <code class="language-plaintext highlighter-rouge">path/to/export</code> and any subfolders into a mailbag named “allfacstafflistserv” with EML, HTML, and PDF derivatives. <code class="language-plaintext highlighter-rouge">mailbagit</code> will attempt to use both the directory structure of the PSTs as well as the email folder tree within the PST(s) to arrange derivatives.</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mailbagit path/to/directory -i eml -d pdf-chrome warc -mailbag-name fundraising_emails -r
</code></pre></div></div>
<blockquote>
  <p>Packages all the EML files found in <code class="language-plaintext highlighter-rouge">path/to/directory</code> and any subfolders into a mailbag named “fundraising_emails” with PDF and WARC derivatives with the PDF derivatives using headless Chrome. <code class="language-plaintext highlighter-rouge">mailbagit</code> will use the both the directory structure of the EMLs as well as any <code class="language-plaintext highlighter-rouge">X-Folder</code> headers to arrange derivatives.</p>
</blockquote>

<blockquote>
  <p>This examples also uses the <code class="language-plaintext highlighter-rouge">-r</code> (dry-run) flag, which will parse all EML files, but will not move, change, or package them into a mailbag. If there are any parsing errors, this will write an error report to the  <code class="language-plaintext highlighter-rouge">fundraising_emails_errors</code> directory.</p>
</blockquote>

<p>If you are using the <a href="/mailbag//install/#windows-executables">Windows executables</a>, substitute <code class="language-plaintext highlighter-rouge">mailbagit.exe</code> for the <code class="language-plaintext highlighter-rouge">mailbagit</code> command. e.g <code class="language-plaintext highlighter-rouge">mailbagit.exe path/to/messages -i msg -d mbox pdf-chrome</code></p>

<h3 id="mandatory-arguments">Mandatory Arguments</h3>

<ul>
  <li><strong>directory/filepath</strong>:
    <blockquote>
      <p>The input MBOX or PST file, or a directory containing EML or MSG files.
When creating mailbags from IMAP connections, this must be an existing directory where the mailbag will be created.</p>
    </blockquote>
  </li>
  <li><strong>-m –mailbag-name</strong>:
    <blockquote>
      <p>This will be used as the directory name for the mailbag, or the filename if compression is used.
Must be a valid directory or file name.</p>
    </blockquote>
  </li>
  <li><strong>-i –input</strong>:
    <blockquote>
      <p>File format to use  as input for a mailbag.
Argument takes single input.
e.g. <code class="language-plaintext highlighter-rouge">-i imap</code> <code class="language-plaintext highlighter-rouge">-i pst</code></p>
    </blockquote>
  </li>
  <li><strong>-d –derivatives</strong>:
    <blockquote>
      <p>Specifies a single or list of formats required as results from mailbag.
Argument takes multiple inputs.
e.g. <code class="language-plaintext highlighter-rouge">-d eml pdf warc</code></p>
    </blockquote>
  </li>
</ul>

<h3 id="mailbag-optional--arguments">Mailbag Optional  Arguments</h3>

<ul>
  <li><strong>-r –dry-run</strong>
    <blockquote>
      <p>Performs a test run that will not alter any files other than writing an error report. When this flag is used, <code class="language-plaintext highlighter-rouge">mailbagit</code> parses all the email it is provide and formats derivatives as much as it can without writing anything to disk. If there are any error or warnings, this will create an error report with an <code class="language-plaintext highlighter-rouge">errors.csv</code> listing all issues as well as a full stack trace in a <code class="language-plaintext highlighter-rouge">.txt</code> file.</p>
    </blockquote>
  </li>
  <li><strong>–css</strong>
    <blockquote>
      <p>Path to a CSS file to override the included CSS when creating PDF or HTML derivatives
Argument takes single file path as input.</p>
    </blockquote>
  </li>
  <li><strong>-c –compress</strong>
    <blockquote>
      <p>Compresses the mailbag as a ZIP, TAR, or TAR.GZ
e.g. <code class="language-plaintext highlighter-rouge">-c zip</code> or <code class="language-plaintext highlighter-rouge">-c tar.gz</code></p>
    </blockquote>
  </li>
</ul>

<h3 id="bagit-python-arguments">Bagit-python arguments</h3>

<p>Mailbag also accepts most <a href="https://github.com/LibraryOfCongress/bagit-python">bagit-python</a> arguments. Thus, you can provide arguments like <code class="language-plaintext highlighter-rouge">--processes 2</code> or arguments to add metadata such as <code class="language-plaintext highlighter-rouge">--source-organization University at Albany, SUNY</code></p>

<p>The only bag-python arguments that <code class="language-plaintext highlighter-rouge">mailbagit</code> does not support are <code class="language-plaintext highlighter-rouge">-log</code>, <code class="language-plaintext highlighter-rouge">-quiet</code>, <code class="language-plaintext highlighter-rouge">-validate</code>, <code class="language-plaintext highlighter-rouge">-fast</code>, and <code class="language-plaintext highlighter-rouge">-completeness_only</code></p>

<p>If you would like to validate your mailbag, <code class="language-plaintext highlighter-rouge">mailbagit</code> comes with <a href="https://github.com/LibraryOfCongress/bagit-python">bagit-python</a> installed. Thus, you can run:</p>

<p><code class="language-plaintext highlighter-rouge">bagit.py --validate /path/to/mailbag</code></p>

<h2 id="using-the-mailbagit-gui-graphical-user-interface">Using the <code class="language-plaintext highlighter-rouge">mailbagit-gui</code> graphical user interface</h2>

:ET